var Rx_1=require("rxjs/Rx");!function(e){e[e.CHILD_ADDED=0]="CHILD_ADDED",e[e.CHILD_REMOVED=1]="CHILD_REMOVED",e[e.CHILD_CHANGED=2]="CHILD_CHANGED",e[e.CHILD_MOVED=3]="CHILD_MOVED",e[e.VALUE=4]="VALUE"}(exports.EventType||(exports.EventType={}));var EventType=exports.EventType,RxFirebasePayload=function(){function e(e,t){this.snapshot=e,this.siblingKey=t}return e}();exports.RxFirebasePayload=RxFirebasePayload;var RxFirebase=function(){function e(e){this.query=e}return Object.defineProperty(e.prototype,"ref",{get:function(){return this.query.ref()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uid",{get:function(){return this.ref.getAuth().uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authData",{get:function(){return this.ref.getAuth()},enumerable:!0,configurable:!0}),e.prototype.child=function(t){return new e(this.ref.child(t))},e.prototype.unauth=function(){this.ref.unauth()},e.prototype.rx_observeAuth=function(){var e=this;return new Rx_1.Observable(function(t){var r=function(e){t.next(e)};return e.ref.onAuth(r),function(){e.ref.offAuth(r)}})},e.prototype.rx_observeConnectionStatus=function(){var t=this,r=new e(t.ref.root());return r.child(".info").child("connected").rx_observe(EventType.VALUE).map(function(e){return null!=e.snapshot.val()})},e.prototype.rx_remove=function(){var e=this;return new Rx_1.Observable(function(t){return e.ref.remove(function(e){null!=e?t.error(e):(t.next({}),t.complete())}),function(){}})},e.prototype.rx_set=function(e){var t=this;return new Rx_1.Observable(function(r){return t.ref.set(e,function(e){null!=e?r.error(e):(r.next({}),r.complete())}),function(){}})},e.prototype.rx_update=function(e){var t=this;return new Rx_1.Observable(function(r){return t.ref.update(e,function(e){null!=e?r.error(e):(r.next({}),r.complete())}),function(){}})},e.prototype.rx_authWithCustomToken=function(e){var t=this;return new Rx_1.Observable(function(r){t.ref.authWithCustomToken(e,function(e,t){e?r.error(e):(r.next(t),r.complete())})})},e.prototype.rx_observe=function(e){var t=this;return new Rx_1.Observable(function(r){var n=function(e,t){r.next(new RxFirebasePayload(e,t))};return t.query.on(t.convertToString(e),n,function(e){r.error(e)}),function(){t.query.off(t.convertToString(e),n)}})},e.prototype.orderByChild=function(t){var r=this.query.orderByChild(t);return new e(r)},e.prototype.orderByValue=function(){var t=this.query.orderByValue();return new e(t)},e.prototype.orderByPriority=function(){var t=this.query.orderByPriority();return new e(t)},e.prototype.limitToLast=function(t){var r=this.query.limitToLast(t);return new e(r)},e.prototype.convertToString=function(e){switch(e){case EventType.CHILD_ADDED:return"child_added";case EventType.CHILD_CHANGED:return"child_changed";case EventType.CHILD_MOVED:return"child_moved";case EventType.CHILD_REMOVED:return"child_removed";case EventType.VALUE:return"value"}},e}();exports.RxFirebase=RxFirebase;